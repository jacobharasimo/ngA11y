!function(){"use strict";angular.module("ngA11y").factory("nga11yAnnounce",[function(){function a(a){var b=angular.element("<div>").attr({id:"nga11y-politeannounce"+a,role:"log","aria-live":"polite","aria-relevant":"additions",style:d});return angular.element(document.body).append(b),b}function b(a){var b=angular.element("<div>").attr({id:"nga11y-assertiveannounce"+a,role:"log","aria-live":"assertive","aria-relevant":"additions",style:d});return angular.element(document.body).append(b),b}var c={number:2,pIndex:0,aIndex:0},d="border: 0;clip: rect(0 0 0 0);clip: rect(0, 0, 0, 0);height: 1px;margin: -1px;overflow: hidden;padding: 0;width: 1px;position: absolute;";c.politeAnnouncers=[];for(var e=0;e<c.number;e++)c.politeAnnouncers.push(a(e));for(c.assertiveAnnouncers=[],e=0;e<c.number;e++)c.assertiveAnnouncers.push(b(e));return c.politeAnnounce=function(a){this.politeAnnouncers[this.pIndex].empty(),this.pIndex+=1,this.pIndex=this.pIndex%this.number,this.politeAnnouncers[this.pIndex].append(angular.element("<p>").text(a))},c.assertiveAnnounce=function(a){this.assertiveAnnouncers[this.aIndex].empty(),this.aIndex+=1,this.aIndex=this.aIndex%this.number,this.assertiveAnnouncers[this.aIndex].append(angular.element("<p>").text(a))},c}])}(),function(){"use strict";angular.module("ngA11y").directive("nga11yFocus",["$timeout",function(a){function b(a){return!a.offsetWidth||!a.offsetHeight}return{restrict:"A",link:function(c,d){a(function(){if(!document.activeElement||document.activeElement&&(b(document.activeElement)||"BODY"===document.activeElement.nodeName)){if(b(d[0]))return;d[0].hasAttribute("tabindex")||d[0].setAttribute("tabindex","0"),d[0].focus()}},10)}}}])}(),function(){"use strict";function a(){return{restrict:"E",require:"?ngModel",link:function(a,b,c,d){d&&(d.focus=function(){b.focus()})}}}angular.module("ngA11y").directive("nga11yValidation",["$timeout","nga11yAnnounce",function(a,b){return{require:"ngModel",link:function(c,d,e,f){function g(a,b,c){for(var d=b.getAttribute("aria-describedby")||"",e=d,f=a.describedby||[],g=0,h=f.length;h>g;g++){var i=new RegExp("(?:^|\\s)"+f[g]+"(?!\\S)","g");d=d.replace(i,"")}if(a.describedby=[],c){var j=new RegExp("(?:^|\\s)"+c+"(?!\\S)");j.test(d)||(a.describedby.push(c),d+=" "+c)}d!==e&&b.setAttribute("aria-describedby",d)}function h(c){a(function(){var a=d[0];if(a&&(a.setAttribute("aria-invalid",f.$invalid),f.$invalid)){var h=c?c:"",i=e.nga11yValidationId;if(i){var j=document.getElementById(i);if(!j)return;angular.element(j).hasClass("ng-hide")?g(f,a):(h+=" "+j.innerText,g(f,a,i))}""!==h&&b.assertiveAnnounce(h)}},0)}var i,j=e.nga11yValidationDelay;c.debounce=j?parseInt(j,10):2e3,d.bind("blur",function(){i&&a.cancel(i),h("Previous field invalid.")}),f.$parsers.unshift(function(b){return i&&a.cancel(i),i=a(h,c.debounce),b})}}}]),module.directive("input",a),module.directive("textarea",a),module.directive("select",a),module.directive("nga11yForm",["$log",function(a){return{restrict:"A",link:function(b,c,d,e){if(!d.name)return void a.error("nga11yForm must have a name attribute");var f=b[d.name];b.focusFirst=function(){for(var a in f)if(f.hasOwnProperty(a)&&0!==a.indexOf("$")){var b=f[a];if(b.$invalid)return b.focus&&b.focus(),!0}return!1},c.on("submit",function(a){b.focusFirst()&&a.preventDefault()})}}}])}(),function(){"use strict";angular.module("ngA11y").directive("nga11yModal",["$log","$ngA11y",function(a,b){return{restrict:"A",scope:{},controller:["$element","$scope","$attrs",function(a,c,d){c.options=b.modal;b.modal.focusSelector}],link:["scope","element","attrs","ctrl",function(a,b,c,d){b.attr("tabindex","-1");var e=b[0].querySelector("[nga11y-modal-closer]");b.on("keydown",function(a){if(27===a.which)return void(e&&angular.element(e).triggerHandler("click"));if(9===a.which){var c=d.getFocusable(b);c&&(c.first===c.last?(c.first.focus(),a.preventDefault()):a.target===c.first&&a.shiftKey?(c.last.focus(),a.preventDefault()):a.target!==c.last||a.shiftKey||(c.first.focus(),a.preventDefault()))}})}]}}])}(),function(){"use strict";angular.module("ngA11y").provider("$ngA11y",function(){this.options={modal:{focusSelector:'a, input:not([hidden="true"]), [tabindex], select, button, textarea, area'},forms:{},focus:{},announce:{}},this.$get=[function(){return this.options}]})}();